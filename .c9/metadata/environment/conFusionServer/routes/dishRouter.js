{"filter":false,"title":"dishRouter.js","tooltip":"/conFusionServer/routes/dishRouter.js","undoManager":{"mark":0,"position":0,"stack":[[{"start":{"row":0,"column":0},"end":{"row":47,"column":50},"action":"remove","lines":["const express = require('express');","const bodyParser = require('body-parser');","const dishRouter = express.Router();","","dishRouter.use(bodyParser.json());","dishRouter.route('/')",".all((req,res,next) => {","    res.statusCode = 200;","    res.setHeader('Content-Type', 'text/plain');","    next();","})",".get((req,res,next) => {","    res.end('Will send all the dishes to you!');","})",".post((req, res, next) => {","    res.end('Will add the dish: ' + req.body.name + ' with details: ' + req.body.description);","})",".put((req, res, next) => {","    res.statusCode = 403;","    res.end('PUT operation not supported on /dishes');","})",".delete((req, res, next) => {","    res.end('Deleting all dishes');","});","","dishRouter.route('/:dishId')",".all((req,res,next) => {","    res.statusCode = 200;","    res.setHeader('Content-Type', 'text/plain');","    next();","})",".get((req,res,next) => {","","    res.end('Will send details of the dish: ' + req.params.dishId +' to you!');","})",".post((req, res, next) => {","\tres.statusCode = 403;","    res.end('POST operation not supported on /dishes/'+ req.params.dishId);","})",".put((req, res, next) => {","    res.end('Will update the dish: ' + req.body.name + ","        ' with details: ' + req.body.description);","})",".delete((req, res, next) => {","    res.end('Deleting dish: ' + req.params.dishId);","});","","module.exports = dishRouter;// JavaScript Document"],"id":2},{"start":{"row":0,"column":0},"end":{"row":79,"column":28},"action":"insert","lines":["const express = require('express');","const bodyParser = require('body-parser');","const mongoose = require('mongoose');","","const Dishes = require('../models/dishes');","","const dishRouter = express.Router();","","dishRouter.use(bodyParser.json());","","dishRouter.route('/')",".get((req,res,next) => {","    Dishes.find({})","    .then((dishes) => {","        res.statusCode = 200;","        res.setHeader('Content-Type', 'application/json');","        res.json(dishes);","    }, (err) => next(err))","    .catch((err) => next(err));","})",".post((req, res, next) => {","    Dishes.create(req.body)","    .then((dish) => {","        console.log('Dish Created ', dish);","        res.statusCode = 200;","        res.setHeader('Content-Type', 'application/json');","        res.json(dish);","    }, (err) => next(err))","    .catch((err) => next(err));","})",".put((req, res, next) => {","    res.statusCode = 403;","    res.end('PUT operation not supported on /dishes');","})",".delete((req, res, next) => {","    Dishes.remove({})","    .then((resp) => {","        res.statusCode = 200;","        res.setHeader('Content-Type', 'application/json');","        res.json(resp);","    }, (err) => next(err))","    .catch((err) => next(err));    ","});","","dishRouter.route('/:dishId')",".get((req,res,next) => {","    Dishes.findById(req.params.dishId)","    .then((dish) => {","        res.statusCode = 200;","        res.setHeader('Content-Type', 'application/json');","        res.json(dish);","    }, (err) => next(err))","    .catch((err) => next(err));","})",".post((req, res, next) => {","    res.statusCode = 403;","    res.end('POST operation not supported on /dishes/'+ req.params.dishId);","})",".put((req, res, next) => {","    Dishes.findByIdAndUpdate(req.params.dishId, {","        $set: req.body","    }, { new: true })","    .then((dish) => {","        res.statusCode = 200;","        res.setHeader('Content-Type', 'application/json');","        res.json(dish);","    }, (err) => next(err))","    .catch((err) => next(err));","})",".delete((req, res, next) => {","    Dishes.findByIdAndRemove(req.params.dishId)","    .then((resp) => {","        res.statusCode = 200;","        res.setHeader('Content-Type', 'application/json');","        res.json(resp);","    }, (err) => next(err))","    .catch((err) => next(err));","});","","module.exports = dishRouter;"]}]]},"ace":{"folds":[],"scrolltop":660,"scrollleft":0,"selection":{"start":{"row":79,"column":28},"end":{"row":79,"column":28},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":44,"state":"no_regex","mode":"ace/mode/javascript"}},"timestamp":1540587757256,"hash":"f4c01b7c6a3984daa2ca35bd139850ca652d8edc"}