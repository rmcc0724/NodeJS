{"changed":false,"filter":false,"title":"leaderRouter.js","tooltip":"/conFusionServer/routes/leaderRouter.js","value":"const express = require('express');\nconst bodyParser = require('body-parser');\nconst mongoose = require('mongoose');\nconst Leaders = require('../models/leaders');\nconst leaderRouter = express.Router();\n\nleaderRouter.use(bodyParser.json());\n\nleaderRouter.route('/')\n.get((req,res,next) => {\n    Leaders.find({})\n    .then((leaders) => {\n        res.statusCode = 200;\n        res.setHeader('Content-Type', 'application/json');\n        res.json(leaders);\n    }, (err) => next(err))\n    .catch((err) => next(err));\n})\n.post((req, res, next) => {\n    Leaders.create(req.body)\n    .then((leader) => {\n        console.log('Leader Created ', leader);\n        res.statusCode = 200;\n        res.setHeader('Content-Type', 'application/json');\n        res.json(leader);\n    }, (err) => next(err))\n    .catch((err) => next(err));\n})\n.put((req, res, next) => {\n    res.statusCode = 403;\n    res.end('PUT operation not supported on /leaders');\n})\n.delete((req, res, next) => {\n    Leaders.remove({})\n    .then((resp) => {\n        res.statusCode = 200;\n        res.setHeader('Content-Type', 'application/json');\n        res.json(resp);\n    }, (err) => next(err))\n    .catch((err) => next(err));    \n});\n\nleaderRouter.route('/:leaderId')\n.get((req,res,next) => {\n    Leaders.findById(req.params.leaderId)\n    .then((leader) => {\n        res.statusCode = 200;\n        res.setHeader('Content-Type', 'application/json');\n        res.json(leader);\n    }, (err) => next(err))\n    .catch((err) => next(err));\n})\n.post((req, res, next) => {\n    res.statusCode = 403;\n    res.end('POST operation not supported on /leaders/'+ req.params.leaderId);\n})\n.put((req, res, next) => {\n    Leaders.findByIdAndUpdate(req.params.leaderId, {\n        $set: req.body\n    }, { new: true })\n    .then((leader) => {\n        res.statusCode = 200;\n        res.setHeader('Content-Type', 'application/json');\n        res.json(leader);\n    }, (err) => next(err))\n    .catch((err) => next(err));\n})\n.delete((req, res, next) => {\n    Leaders.findByIdAndRemove(req.params.leaderId)\n    .then((resp) => {\n        res.statusCode = 200;\n        res.setHeader('Content-Type', 'application/json');\n        res.json(resp);\n    }, (err) => next(err))\n    .catch((err) => next(err));\n});\n\nmodule.exports = leaderRouter;","undoManager":{"mark":-1,"position":-1,"stack":[]},"ace":{"folds":[],"scrolltop":477.8032531738281,"scrollleft":0,"selection":{"start":{"row":0,"column":0},"end":{"row":0,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":32,"state":"start","mode":"ace/mode/javascript"}},"timestamp":1540995243821}